<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CS2 Cases Shop</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #1e1e2f;
      color: white;
      padding: 20px;
      margin: 0;
    }
    .header {
      text-align: center;
      margin-bottom: 30px;
    }
    .offer {
      background: #2d2d44;
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 16px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .offer h3 {
      margin: 0;
      font-size: 18px;
    }
    .price {
      background: #ffab00;
      color: #1e1e2f;
      padding: 6px 12px;
      border-radius: 12px;
      font-weight: bold;
    }
    button {
      background: #00aced;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 12px;
      font-size: 16px;
      cursor: pointer;
    }
    button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
  </style>
</head>
<body>
  <div class="header">
    <h2>üè™ –ú–∞–≥–∞–∑–∏–Ω CS2</h2>
    <p>–ü–æ–∫—É–ø–∞–π –∑–∞ Telegram Stars üí´</p>
  </div>

  <div class="offer">
    <div>
      <h3>üíé –ü—Ä–µ–º–∏—É–º –Ω–∞ 7 –¥–Ω–µ–π</h3>
      <p>–ö–µ–π—Å—ã –∫–∞–∂–¥—ã–µ 2 —á–∞—Å–∞ + –±–æ–Ω—É—Å—ã</p>
    </div>
    <div>
      <div class="price">50 ‚≠ê</div>
      <button onclick="buyPremium()">–ö—É–ø–∏—Ç—å</button>
    </div>
  </div>

  <div class="offer">
    <div>
      <h3>üéÅ 10 –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –∫–µ–π—Å–æ–≤</h3>
      <p>–û—Ç–∫—Ä—ã–≤–∞–π —Å—Ä–∞–∑—É!</p>
    </div>
    <div>
      <div class="price">30 ‚≠ê</div>
      <button onclick="buyCases()">–ö—É–ø–∏—Ç—å</button>
    </div>
  </div>

  <script>
    const tg = window.Telegram.WebApp;
    tg.expand();
    tg.ready();

    async function buy(product_id, amount) {
      try {
        const invoice = {
          currency: "XTR", // XTR = Telegram Stars
          prices: [{ label: "Telegram Stars", amount: amount }],
          payload: JSON.stringify({
            user_id: tg.initDataUnsafe.user.id,
            product: product_id
          })
        };

        tg.openInvoice(invoice, (status, error) => {
          if (status === "paid") {
            tg.showPopup({
              title: "‚úÖ –£—Å–ø–µ—Ö!",
              message: "–ü–æ–∫—É–ø–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –ö–µ–π—Å—ã —É–∂–µ –≤ –±–æ—Ç–µ!",
              buttons: [{ type: "close" }]
            });
            setTimeout(() => tg.close(), 2000);
          } else if (status === "failed") {
            tg.showAlert("–û—à–∏–±–∫–∞ –æ–ø–ª–∞—Ç—ã: " + error);
          }
        });
      } catch (e) {
        tg.showAlert("–û—à–∏–±–∫–∞: " + e.message);
      }
    }

    function buyPremium() {
      buy("premium_7d", 50);
    }

    function buyCases() {
      buy("cases_10", 30);
    }
  </script>
</body>
</html>
